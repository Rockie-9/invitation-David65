<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>65 å£½å®´ï½œå…‰å½±èˆ‡è©©çš„å¤œæ™š</title>
    
    <meta property="og:title" content="65 å£½å®´ï½œå…‰å½±èˆ‡è©©çš„å¤œæ™š">
    <meta property="og:description" content="èª æ‘¯é‚€è«‹æ‚¨ï¼Œèˆ‡æŠŠç”Ÿæ´»æ‹æˆå½±åƒã€å¯«æˆè©©çš„äººï¼Œç•™ä¸‹ä¸€å¼µå€¼å¾—å›çœ‹çš„åˆç…§ã€‚">
    <meta property="og:url" content="https://invitation-david65.vercel.app/">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. Design Tokens (è¨­è¨ˆç³»çµ±) --- */
        :root {
            /* Palette */
            --bg-base: #F3F4F6;
            --text-main: #1F2937;
            --text-sub: #4B5563;
            --text-muted: #9CA3AF;
            
            /* Theme Colors */
            --accent: #8B6B2E;    /* é‡‘æ£•è‰² */
            --primary: #2C3E50;   /* æ·±è—ç° */
            --surface: #FFFFFF;   /* å¡ç‰‡èƒŒæ™¯ */
            
            /* Feedback */
            --success: #10B981;
            --error: #EF4444;
            --focus-ring: rgba(139, 107, 46, 0.4);

            /* Typography */
            --font-serif: 'Noto Serif TC', serif;
            --font-sans: 'Lato', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

            /* Spacing & Layout - è§£æ±ºé®æ“‹çš„é—œéµ */
            --card-width: min(90vw, 420px); 
            /* é«˜åº¦ç¨å¾®æ‹‰é«˜ä¸€é»ä»¥å®¹ç´æµç¨‹è¡¨ */
            --card-height: clamp(680px, 85vh, 800px); 
            
            --radius-lg: 16px;
            --radius-md: 8px;
            --radius-pill: 50px;
        }

        /* --- 2. Global Reset & Base --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0;
            font-family: var(--font-sans);
            color: var(--text-main);
            background: var(--bg-base);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; 
            
            /* èƒŒæ™¯ç´‹ç† */
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(255,255,255,0.8) 0%, rgba(0,0,0,0) 70%),
                url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            background-blend-mode: normal, overlay;
        }

        /* --- 3. Card System (3D Flip) --- */
        .scene {
            width: var(--card-width);
            height: var(--card-height);
            perspective: 1200px;
            opacity: 0;
            animation: fadeIn 1s ease-out forwards;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.15);
            border-radius: var(--radius-lg);
            cursor: pointer;
        }

        .card.is-flipped { transform: rotateY(180deg); }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--radius-lg);
            background: var(--surface);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            -webkit-backface-visibility: hidden; 
        }

        /* --- Front Face --- */
        .card__face--front {
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fff 0%, #f9f7f5 100%);
        }

        .front-frame {
            position: relative;
            width: 88%;
            height: 92%;
            border: 1.5px solid var(--accent);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* è£é£¾æ€§é‚Šè§’ */
        .front-frame::before, .front-frame::after {
            content: ''; position: absolute; width: 10px; height: 10px;
            border: 1.5px solid var(--accent); transition: all 0.3s ease;
        }
        .front-frame::before { top: -1.5px; left: -1.5px; border-right: none; border-bottom: none; }
        .front-frame::after { bottom: -1.5px; right: -1.5px; border-left: none; border-top: none; }

        .title-eyebrow {
            font-size: 0.75rem; color: var(--accent); letter-spacing: 0.25em;
            margin-bottom: 1.5rem; text-transform: uppercase; font-weight: 600;
        }

        .title-main {
            font-family: var(--font-serif); font-size: 2.25rem; color: var(--primary);
            letter-spacing: 0.15em; line-height: 1.4; text-align: center; margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .symbol { font-size: 3.5rem; color: var(--accent); margin: 2rem 0; opacity: 0.8; }

        .tap-hint {
            position: absolute; bottom: 2rem;
            font-size: 0.8rem; color: var(--text-muted); letter-spacing: 0.1em;
            display: flex; align-items: center; gap: 6px;
            animation: pulse 2s infinite ease-in-out;
        }

        /* --- Back Face --- */
        .card__face--back {
            transform: rotateY(180deg);
            padding: 2rem 1.5rem;
            background: #fff;
            display: flex;
            flex-direction: column;
        }

        .scroll-container {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
            scrollbar-width: none;
            mask-image: linear-gradient(to bottom, black 90%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 90%, transparent 100%);
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        .poem-container {
            text-align: center; margin-bottom: 2rem; padding-bottom: 1.5rem;
            border-bottom: 1px solid #E5E7EB;
        }

        .tag {
            display: inline-block; font-size: 0.7rem; color: var(--accent);
            border: 1px solid var(--accent); padding: 2px 10px; border-radius: 20px;
            margin-bottom: 1rem; letter-spacing: 0.05em;
        }

        .poem-content {
            font-family: var(--font-serif); font-size: 1.1rem; line-height: 1.8;
            color: var(--primary); font-style: italic; white-space: pre-line; margin: 0;
        }

        /* éŠæˆ²å€å¡Š */
        .quiz-card {
            background: #FFFCF5; border: 1px dashed rgba(139, 107, 46, 0.3);
            border-radius: var(--radius-md); padding: 1.25rem; margin-bottom: 1.5rem;
        }

        .quiz-header {
            font-size: 0.9rem; font-weight: 700; color: var(--accent);
            margin-bottom: 1rem; text-align: center; letter-spacing: 0.05em;
        }

        .quiz-question {
            font-size: 1rem; font-weight: 600; color: var(--primary); margin-bottom: 1rem;
        }

        .quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }

        .btn-option {
            background: #fff; border: 1px solid #E5E7EB; padding: 10px 14px;
            border-radius: 6px; text-align: left; font-size: 0.95rem; color: var(--text-sub);
            cursor: pointer; transition: all 0.2s; position: relative;
        }
        
        .btn-option:active { background: #f3f3f3; }
        .btn-option.correct { background: var(--success); color: #fff; border-color: var(--success); }
        .btn-option.wrong { background: var(--error); color: #fff; border-color: var(--error); }

        /* --- âœ¨ æ–°å¢ï¼šæµç¨‹æ™‚é–“è»¸ âœ¨ --- */
        .timeline-box {
            margin-bottom: 1.5rem;
            padding: 0 0.5rem;
        }
        .timeline-header {
            font-size: 0.9rem; font-weight: 700; color: var(--accent);
            margin-bottom: 0.8rem; text-align: center; letter-spacing: 0.05em;
        }
        .timeline-item {
            display: flex;
            margin-bottom: 12px;
            align-items: baseline;
            position: relative;
        }
        .timeline-item:last-child { margin-bottom: 0; }
        
        .t-time {
            font-family: var(--font-serif);
            font-weight: bold;
            color: var(--accent);
            width: 50px;
            flex-shrink: 0;
            font-size: 1rem;
        }
        .t-content {
            border-left: 2px solid #E5E7EB;
            padding-left: 12px;
            padding-bottom: 4px;
        }
        .timeline-item:last-child .t-content { border-left: 2px solid transparent; }

        .t-title {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.95rem;
        }
        .t-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 2px;
            line-height: 1.4;
        }

        /* è³‡è¨Šå€ */
        .info-box {
            background: #F8FAFC; border-radius: var(--radius-md);
            padding: 1.25rem; margin-bottom: 1rem; font-size: 0.9rem;
        }

        .info-row {
            display: grid; grid-template-columns: 60px 1fr; gap: 0.5rem; margin-bottom: 0.75rem;
        }
        .info-label { color: var(--accent); font-weight: 600; font-family: var(--font-serif); }
        .info-value { color: var(--text-main); line-height: 1.5; }

        .transport-box {
            margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed #E2E8F0;
            font-size: 0.85rem; color: var(--text-sub);
        }
        .transport-item { margin-bottom: 4px; display: flex; gap: 6px; }

        /* CTA æŒ‰éˆ• */
        .btn-cta {
            width: 100%; padding: 16px; background: var(--primary); color: #fff;
            border: none; border-radius: var(--radius-pill); font-size: 1rem; font-weight: 600;
            letter-spacing: 0.05em; cursor: pointer; flex-shrink: 0;
            box-shadow: 0 4px 14px rgba(44, 62, 80, 0.3);
            transition: all 0.3s;
            margin-top: 10px;
        }
        .btn-cta:active { transform: scale(0.98); }

        /* --- Modal System --- */
        .modal-backdrop {
            position: fixed; inset: 0; z-index: 1000;
            background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(4px);
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
            display: flex; justify-content: center; align-items: flex-end;
        }
        .modal-backdrop.open { opacity: 1; pointer-events: auto; }

        .modal-panel {
            background: rgba(255, 255, 255, 0.96);
            width: 100%; max-width: 500px;
            border-radius: 24px 24px 0 0;
            padding: 2rem;
            max-height: 85vh; overflow-y: auto;
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
        }
        .modal-backdrop.open .modal-panel { transform: translateY(0); }

        /* Form Elements */
        .form-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .form-title { font-family: var(--font-serif); font-size: 1.5rem; color: var(--primary); margin: 0; }
        .btn-close { background: transparent; border: none; font-size: 2rem; color: var(--text-muted); cursor: pointer; }

        .form-field { margin-bottom: 1.25rem; }
        .form-label { display: block; margin-bottom: 0.5rem; font-size: 0.9rem; font-weight: 600; }
        .required { color: var(--error); }

        .input-base {
            width: 100%; padding: 12px 16px; border: 1px solid #E5E7EB; border-radius: var(--radius-md);
            font-size: 1rem; background: #F9FAFB;
        }
        .input-base:focus { outline: none; border-color: var(--accent); background: #fff; }

        .radio-group { display: flex; flex-wrap: wrap; gap: 1rem; }
        .radio-item { display: flex; align-items: center; gap: 6px; }
        .highlight-box { background: #FFFBEB; border: 1px solid #FCD34D; padding: 1rem; border-radius: var(--radius-md); }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.05); opacity: 1; } }

        @media (min-width: 768px) {
            .modal-backdrop { align-items: center; }
            .modal-panel { border-radius: 24px; transform: scale(0.95) translateY(20px); opacity: 0; }
            .modal-backdrop.open .modal-panel { transform: scale(1) translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <main class="scene" id="invitationCard">
        <div class="card">
            <div class="card__face card__face--front">
                <div class="front-frame">
                    <div class="title-eyebrow">INVITATION</div>
                    <h1 class="title-main">å…‰å½±èˆ‡è©©<br>çš„å¤œæ™š</h1>
                    <div class="symbol">â¦</div>
                    <div class="tap-hint">ğŸ‘† é»æ“Šé–‹å•Ÿ Â· é»˜å¥‘å¤§è€ƒé©—</div>
                </div>
            </div>

            <div class="card__face card__face--back">
                <div class="scroll-container">
                    <section class="poem-container">
                        <span class="tag">David åŸå‰µè©©é¸</span>
                        <p class="poem-content" id="randomPoem">...</p>
                    </section>

                    <section class="quiz-card" id="quizContainer">
                        <div class="quiz-header">ğŸ§© David é»˜å¥‘å¤§è€ƒé©—</div>
                        <div id="quizContent"></div>
                        <div id="quizFeedback" style="text-align:center; min-height:1.2em; margin-top:10px; font-size:0.9rem;"></div>
                    </section>

                    <section class="timeline-box">
                        <div class="timeline-header">ğŸ“… æ™šå®´æµç¨‹</div>
                        <div class="timeline-item">
                            <span class="t-time">17:30</span>
                            <div class="t-content">
                                <span class="t-title">æš–å ´å…¥å¸­</span>
                                <span class="t-desc">è‡ªç”±å…¥åº§ï¼Œæ•˜èˆŠå¯’æš„</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="t-time">18:00</span>
                            <div class="t-content">
                                <span class="t-title">é¥—å®´é–‹å¸­</span>
                                <span class="t-desc">ç¢§æµ·å»šæˆ¿ç¾å‘³ä¸Šæ¡Œ</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="t-time">18:15</span>
                            <div class="t-content">
                                <span class="t-title">å…‰å½±å®šæ ¼</span>
                                <span class="t-desc">å£½æ˜Ÿèˆ‡çœ¾åˆå½±ç•™å¿µ</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="t-time">18:30</span>
                            <div class="t-content">
                                <span class="t-title">æ¦®è€€æ™‚åˆ»</span>
                                <span class="t-desc">é ’ç™¼ã€Œ65å¹´åšç‰›åšé¦¬æˆå°±çã€<br>æš¨ é»˜å¥‘äº’å‹•éŠæˆ²</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="t-time">20:30</span>
                            <div class="t-content">
                                <span class="t-title">åœ“æ»¿è³¦æ­¸</span>
                                <span class="t-desc">åƒé£½å–è¶³ï¼ŒæœŸå¾…å†ç›¸èš</span>
                            </div>
                        </div>
                    </section>

                    <section class="info-box">
                        <div class="info-row">
                            <span class="info-label">æ™‚é–“</span>
                            <span class="info-value">2026/02/07 (å…­) 17:30</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">åœ°é»</span>
                            <span class="info-value">ç¢§æµ·å»šæˆ¿ï¼æ•¦åŒ—åº—<br><span style="color:var(--text-sub); font-size:0.85em">åŒ—å¸‚æ¾å±±å€æ•¦åŒ–åŒ—è·¯155å··10è™Ÿ1æ¨“</span></span>
                        </div>
                        <div class="transport-box">
                            <div class="transport-item">ğŸš‡ <strong>æ·é‹+æ­¥è¡Œï¼š</strong>å°å·¨è›‹ç«™ 1 è™Ÿå‡ºå£ï¼Œ8 åˆ†é˜</div>
                            <div class="transport-item">ğŸš— <strong>é–‹è»Šå‰å¾€ï¼š</strong>å»ºè­°åœæ”¾è‡ºåŒ—ç”°å¾‘å ´</div>
                        </div>
                    </section>
                </div>

                <button class="btn-cta" id="openFormBtn">ç¢ºèªå‡ºå¸­ï¼Œèˆ‡æ‚¨ç›¸èš</button>
            </div>
        </div>
    </main>

    <div class="modal-backdrop" id="rsvpModal">
        <div class="modal-panel">
            <div class="form-header">
                <h2 class="form-title">ç™»è¨˜å¸­ä½</h2>
                <button class="btn-close" id="closeFormBtn">&times;</button>
            </div>
            
            <form id="rsvpForm" onsubmit="handleFormSubmit(event)">
                <div class="form-field">
                    <label class="form-label">æ‚¨çš„å§“å / æš±ç¨± <span class="required">*</span></label>
                    <input type="text" name="name" class="input-base" required placeholder="è«‹è¼¸å…¥å§“å">
                </div>
                
                <div class="form-field">
                    <label class="form-label">å‡ºå¸­ç‹€æ…‹ <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="attendance" value="å‡ºå¸­" checked required> æº–æ™‚å‡ºå¸­</label>
                        <label class="radio-item"><input type="radio" name="attendance" value="éºæ†¾ç¼ºå¸­"> éºæ†¾ç¼ºå¸­</label>
                    </div>
                </div>

                <div class="form-field">
                    <label class="form-label">å‡ºå¸­äººæ•¸ <span class="required">*</span></label>
                    <input type="number" name="people" class="input-base" value="1" min="1" max="5" required>
                </div>

                <div class="form-field">
                    <label class="form-label">é£²é£Ÿç¿’æ…£ <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="dietType" value="è‘·" checked required> è‘·é£Ÿ</label>
                        <label class="radio-item"><input type="radio" name="dietType" value="ç´ "> ç´ é£Ÿ</label>
                    </div>
                </div>

                <div class="form-field">
                    <label class="form-label">é£²é£Ÿç¦å¿Œ / éæ• (ç„¡è«‹å¡«ã€Œç„¡ã€) <span class="required">*</span></label>
                    <input type="text" name="restrictions" class="input-base" required placeholder="ç„¡è«‹å¡«ã€Œç„¡ã€">
                </div>

                <div class="form-field">
                    <label class="form-label">é£²é…’ç¿’æ…£ <span class="required">*</span></label>
                    <select name="noAlcohol" class="input-base" required>
                        <option value="å¦">å¯ä»¥å°é…Œ</option>
                        <option value="æ˜¯">ç•¶å¤©å®Œå…¨ä¸é£²é…’</option>
                    </select>
                </div>
                
                <div class="form-field highlight-box">
                    <label class="form-label" style="color:#92400E">20:30 ç”¨é¤å¾Œï¼Œæœƒæƒ³è¦çºŒæ”¤å—ï¼Ÿ <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="afterParty" value="æƒ³åƒåŠ " required> æƒ³åƒåŠ </label>
                        <label class="radio-item"><input type="radio" name="afterParty" value="å…ˆä¸ç”¨"> å…ˆä¸ç”¨</label>
                        <label class="radio-item"><input type="radio" name="afterParty" value="çœ‹ç•¶å¤©ç‹€æ³"> çœ‹ç‹€æ³</label>
                    </div>
                </div>

                <div class="form-field">
                    <label class="form-label">çµ¦å£½æ˜Ÿçš„ä¸€å¥ç¥ç¦ <span class="required">*</span></label>
                    <textarea name="note" class="input-base" rows="3" required placeholder="è«‹ç•™ä¸‹ä¸€å¥è©±..."></textarea>
                </div>

                <button type="submit" class="btn-cta">ç¢ºèªé€å‡º</button>
            </form>
        </div>
    </div>

    <script>
        // Data
        const poems = [
            "ç›¸é‡ï¼Œå…¶å¯¦æ˜¯å€Ÿå°æ–¹çš„å…‰ï¼Œä¾†çœ‹æ¸…è‡ªå·±çš„æš—é»‘\n\nPsï¼šé€™è¼©å­ï¼Œåªæ‰“ç®—åšå¥½é€™ä¸€ä»¶äº‹ï¼Œå­¤å–®å¿«æ¨‚",
            "æ”¾æ…¢ä¸€é»ï¼Œè‡ªå·±ä¹Ÿéœ€è¦è¢«å¥½å¥½ç…§é¡§\n\nPsï¼šç‡ƒå®ƒèµ·ï¼Œç€°æ¼«èµ·ç™¼å‘†çš„èŠ±ç«æ°£",
            "å–œæ­¡çš„ç”Ÿæ´»ï¼Œå¶çˆ¾æ…Œäº‚ï¼Œå¶çˆ¾å¹³ç©©ï¼Œå„æœ‰æ»‹å‘³",
            "éš¨é †å› ç·£ï¼Œæ‰¾åˆ°æœ€æ°ç•¶çš„è¡Œå¼å‰é€²",
            "æ¯ä¸€å€‹ç•¶ä¸‹ï¼Œéƒ½å‰›å‰›å¥½ï¼Œå¿ƒè‹¥è‡ªåœ¨ï¼Œè¬äº‹çš†å®‰",
            "æ­¤æœ‰æ•…å½¼æœ‰ï¼Œæ­¤ç”Ÿæ•…å½¼ç”Ÿï¼Œä¸€åˆ‡ç™¼ç”Ÿï¼Œéƒ½ä¸æ˜¯å¶ç„¶",
            "æ¼¸è¡Œæ¼¸é çš„éºæ†¾ï¼Œä¸”è¡Œä¸”å¿˜ä¸”éš¨é¢¨",
            "ä»»æ€§çš„æ±å¥”è¥¿è·‘ï¼Œéƒ½æ˜¯å­¤ç¨çš„æˆå…¨",
            "åœ¨é©šæ…Œä¸­å°‹æ‰¾ä¾é ï¼Œåœ¨éºè½ä¸­æœŸå¾…å¾©å¾—",
            "ä¸æ˜¯å…«é¢ç²ç“çš„äººï¼Œä¸è¨å››æµ·å…«è’çš„å–œ",
            "èƒ½è€…å¤šå‹ï¼Œæ™ºè€…å¤šæ…®ï¼Œç„¡èƒ½è€…ï¼Œç„¡æ†‚ç„¡æ…®",
            "äººç”Ÿå°±æ˜¯ä¾†ä¸€æ‹›æ‹†ä¸€æ‹›ï¼Œæ’å¾—èµ·ï¼Œä¹Ÿæ”¶å¾—ä½"
        ];

        const quizQuestions = [
            { q: "David æ˜¯å“ªè£¡äººï¼Ÿ", options: ["å°åŒ—", "å°å—", "é«˜é›„"], ans: 1 },
            { q: "ä»–æœ€æ„›é€éä»€éº¼æ–¹å¼è¨˜éŒ„ç”Ÿæ´»ï¼Ÿ", options: ["å¯«ç¨‹å¼", "å¯«è©©èˆ‡æ”å½±", "çƒ¹é£ª"], ans: 1 },
            { q: "ä»–æœ€æ„›åƒä»€éº¼é£Ÿç‰©ï¼ˆå”¯ä¸€æ”¯æŒï¼‰ï¼Ÿ", options: ["ç‰›è‚‰éºµ", "æ°´æ™¶é¤ƒ", "ç«é‹"], ans: 1 }
        ];

        // Elements
        const cardScene = document.getElementById('invitationCard');
        const card = cardScene.querySelector('.card');
        const poemEl = document.getElementById('randomPoem');
        const modal = document.getElementById('rsvpModal');
        const openBtn = document.getElementById('openFormBtn');
        const closeBtn = document.getElementById('closeFormBtn');
        let isQuizInited = false;

        // Init
        window.addEventListener('DOMContentLoaded', () => {
             poemEl.textContent = poems[Math.floor(Math.random() * poems.length)];
        });

        // Flip Logic
        cardScene.addEventListener('click', (e) => {
            // é¿å…é»æ“Šå…§éƒ¨æŒ‰éˆ•æ™‚è§¸ç™¼ç¿»è½‰
            if (e.target.closest('button') || e.target.closest('.quiz-card') || e.target.closest('a')) return;
            
            if (!card.classList.contains('is-flipped')) {
                // ç¿»è½‰æ™‚æ›´æ–°è©©å¥
                poemEl.textContent = poems[Math.floor(Math.random() * poems.length)];
                
                if (!isQuizInited) {
                    initQuiz();
                    isQuizInited = true;
                }
                card.classList.add('is-flipped');
            }
        });

        // Quiz Logic
        function initQuiz() {
            const container = document.getElementById('quizContent');
            const feedback = document.getElementById('quizFeedback');
            const qData = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            
            let html = `<div class="quiz-question">${qData.q}</div><div class="quiz-options">`;
            qData.options.forEach((opt, idx) => {
                html += `<button class="btn-option" onclick="checkAnswer(this, ${idx}, ${qData.ans})">${opt}</button>`;
            });
            html += `</div>`;
            container.innerHTML = html;
            feedback.innerHTML = "";
        }

        window.checkAnswer = function(btn, choiceIdx, correctIdx) {
            const allBtns = btn.parentElement.querySelectorAll('.btn-option');
            const feedback = document.getElementById('quizFeedback');
            allBtns.forEach(b => b.disabled = true);

            if (choiceIdx === correctIdx) {
                btn.classList.add('correct');
                feedback.innerHTML = "<span style='color:var(--success); font-weight:bold'>ğŸ‰ ç­”å°äº†ï¼çœŸæ˜¯æ‡‚ David çš„å¥½æœ‹å‹ï¼</span>";
            } else {
                btn.classList.add('wrong');
                allBtns[correctIdx].classList.add('correct');
                feedback.innerHTML = "<span style='color:var(--error)'>ğŸ™ˆ å“å‘€ï¼å·®ä¸€é»é»ï¼</span>";
            }
        }

        // Modal Logic
        openBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // é˜²æ­¢ç¿»è½‰
            modal.classList.add('open');
        });

        const closeModal = () => modal.classList.remove('open');
        closeBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Form Submit
        async function handleFormSubmit(event) {
            event.preventDefault();
            const btn = event.target.querySelector('button[type="submit"]');
            const originalText = btn.textContent;
            
            btn.textContent = "å‚³é€ä¸­...";
            btn.style.opacity = "0.7";
            btn.disabled = true;

            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch('/api/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    alert(`è¬è¬ ${data.name}ï¼Œæˆ‘å€‘å·²æˆåŠŸæ”¶åˆ°æ‚¨çš„å›è¦†ï¼`);
                    closeModal();
                    btn.textContent = "å·²å ±åæˆåŠŸ";
                } else {
                    throw new Error(result.error || 'å‚³é€å¤±æ•—');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('æŠ±æ­‰ï¼Œå‚³é€ç™¼ç”ŸéŒ¯èª¤ã€‚\nåŸå› ï¼š' + error.message);
                btn.textContent = originalText;
                btn.style.opacity = "1";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
